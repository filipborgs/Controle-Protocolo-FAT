<!DOCTYPE html>

<html lang="br" >

    <head>

        <meta charset="UTF-8">

        <!--====== TITLE TAG ======-->
        <title>Gerenciador de Protocolos</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="assest/js/vendor/jquery-1.12.4.min.js"></script>

        <!--====== FAVICON ICON =======-->
        <link rel="shortcut icon" type="image/ico" href="assest/img/favicon.png" />

        <!-- /\/\/\/\ TABLE RESPONSIVE /\/\/\/\ -->

        <link rel="stylesheet" href="assest/css/normalize.css">
        <link rel="stylesheet" href="assest/css/demo.css">
        <!-- Pushy CSS -->
        <link rel="stylesheet" href="assest/css/pushy.css">

        <script src="assest/js/project/dados_connection.js"></script>
        <script src="assest/js/project/control_user.js"></script>
        <script src="assest/js/project/alertas.js"></script>
        <!-- ===== TABLE RESPONSIVE ===== -->
        <link rel="stylesheet" href="assest/css/style.css">
        <link rel="stylesheet" href="assest/css/styles.css">


        <!-- \/\/\/\/\/\/\/\/ SCRIPTS JS \/\/\/\/\/\/\/\/ -->
        <script>

            /* 
             *  **********   FUNÇÃO PARA EXIBIR O BOTÃO DE INSERIR
             *  **********      APENAS DE USUÁRIO TIVER PERMISSÃO
             */

            function exibeButtonInserir() {

                if (verifiquePermissaoInserir() === true) {

                    divImg = document.getElementById("img_option_cadastrar");

                    image = document.createElement("img");
                    image.setAttribute("src", "assest/img/new.png");
                    image.setAttribute("height", "45");
                    image.setAttribute("style", "cursor:pointer;");
                    image.setAttribute("onclick", "CallFormCadastrar();");
                    image.setAttribute("width", "47");
                    image.setAttribute("title", "Adicionar");

                    divImg.append(image);
                }

            }

            /* 
             *  **********   FUNÇÃO PARA EXIBIR QUALQUER MENSAGEM NA TELA 
             *  **********  USANDO O MODAL QUE É CHAMADO PELA FUNÇÃO
             */

            function AlertModal(msg) {

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();
                sendMensage.append(msg);
                window.location.href = "#popup1";

            }

            /* 
             *  **********   IDENTIFICA O ATO DE ENTRAR NA LINHA COM O MOUSE
             *  ********** E ALTERA O ESTILO NA LINHA PARA DAR DESTAQUE 
             */

            function linhaI(id) {
                tr1 = document.getElementById(id);

                tr1.setAttribute("style", "background-color:#999;cursor:pointer;");
            }

            /* 
             *  **********   IDENTIFICA O ATO DE SAIR DA LINHA COM O MOUSE
             *  ********** E REMOVE O ESTILO DA LINHA PARA TIRAR O DESTAQUE 
             */

            function linhaO(id) {
                tr1 = document.getElementById(id);
                tr1.removeAttribute("style");
            }

            /* 
             *  **********   FUNÇÃO PARA SALVAR EDIAÇÃO DO LIVRO E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O UPDATE 
             */

            function SalveEdition() {

                if (verifiquePermissaoEditar() === true) {

                    if (ValidaCampos() === true) {


                        numero = document.getElementById("numero").value;
                        nome = document.getElementById("nome").value;
                        folhas = document.getElementById("folhas").value;
                        cor = document.getElementById("cor").value;
                        dtinicio = document.getElementById("dtinicio").value;
                        dtfim = document.getElementById("dtfim").value;
                        detalhes = document.getElementById("detalhes").value;

                        var metodo = "livro/editarLivro";

                        $.ajax
                                ({
                                    url: uri + metodo,
                                    type: 'PUT',
                                    data: JSON.stringify(
                                            {
                                                "folhas": folhas,
                                                "numero": numero,
                                                "nome": nome,
                                                "detalhes": detalhes,
                                                "cor": cor,
                                                "dataInicio": dtinicio,
                                                "dataFim": dtfim
                                            }),
                                    contentType: 'application/json',
                                    beforeSend: function () {
                                        //AlertModal("ENTRANDO...");
                                    }
                                })
                                .done(function (returnJson) {

                                    if (returnJson === "\"Erro\"") {

                                        AlertModal("O servidor retornou um erro inesperado!");

                                    } else {
                                        
                                        AlertModal("Sucesso!");
                                        RemoveForm();
                                        GetListLivros();

                                    }

                                })
                                .fail(function (msg) {
                                    AlertModal("Falha ao tentar editar livro");
                                    console.log(msg);
                                });


                    } else {
                        AlertModal("Exitem campos com preenchimento inválido!");
                    }

                } else {
                    AlertModal("Usuário sem permissão!");
                }

            }

            /* 
             *  **********   FUNÇÃO PARA VALIDAR OS CAMPOS DE INPUT 
             *  **********       ANTES DE ENVIAR O FORMULÁRIO 
             */

            function ValidaCampos() {

                noerros = true;

                numero = document.getElementById("numero");
                nome = document.getElementById("nome");
                folhas = document.getElementById("folhas");
                dtinicio = document.getElementById("dtinicio");

                if ((numero.value === "") || (parseInt(numero.value) < 1)) {
                    noerros = false;
                    numero.setAttribute("style", "background: palegoldenrod;");
                }
                if (nome.value === "") {
                    noerros = false;
                    nome.setAttribute("style", "background: palegoldenrod;");
                }
                if ((folhas.value === "") || (parseInt(folhas.value) < 1)) {
                    noerros = false;
                    folhas.setAttribute("style", "background: palegoldenrod;");
                }
                if (dtinicio.value === "") {
                    noerros = false;
                    dtinicio.setAttribute("style", "background: palegoldenrod;");
                }

                return noerros;

            }

            /* 
             *  **********   FUNÇÃO PARA CONFIRMAR A EXCLUIR UM LIVRO, 
             *  ********** REALIZAR ENVIO DO JSON COM O ID PARA FAZER O UPDATE 
             */

            function RemoveItem(id) {

                var metodo = "livro/deletarLivro";
                tokin = getToken();

                id = parseInt(id);

                $.ajax
                        ({
                            url: uri + metodo + "?idLivro=" + id,
                            type: 'DELETE',
                            data: {'': ''},
                            beforeSend: function () {
                                //AlertModal("ENTRANDO...");
                            }
                        })
                        .done(function (returnJson) {

                            console.log(returnJson);

                            if (returnJson === "\"Erro\"") {
                                AlertModal("Não foi possível realizar a exclusão!");
                            } else {
                                AlertModal("Exclusão realizada com sucesso!");
                                GetListLivros();
                            }

                        })
                        .fail(function (msg) {

                            AlertModal("Falha ao solicitar a operação");

                            console.log(msg);
                        });


            }

            /* 
             *  **********   FUNÇÃO PARA CONFIRMAR A EXCLUIR UM LIVRO, 
             *  ********** REALIZAR A PERGUNTA SE DESEJA REALMENTE EXCLUIR 
             */

            function ConfirmExclusao(id) {

                CloseModal();

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();

                div = document.createElement("div");
                div.setAttribute("style", "");

                div.append("Tem certeza que deseja excuir?");

                sendMensage.appendChild(div);

                confirm = document.createElement("input");
                confirm.setAttribute("type", "submit");
                confirm.setAttribute("value", "Confirmar");
                confirm.setAttribute("class", "btn-danger");
                confirm.setAttribute("onclick", "RemoveItem(" + id + ")");

                cancelar = document.createElement("input");
                cancelar.setAttribute("type", "submit");
                cancelar.setAttribute("value", "Cancelar");
                cancelar.setAttribute("style", "margin-right: 10px; margin-top: 10px;");
                cancelar.setAttribute("onclick", "CloseModal();");

                sendMensage.appendChild(cancelar);
                sendMensage.appendChild(confirm);

                window.location.href = "#popup1";

            }

            /* 
             *  **********   FUNÇÃO PARA FECHAR O MODAL 
             */

            function CloseModal() {

                window.location.href = "#";

            }

            /* 
             *  **********   FUNÇÃO PARA OBTER OS CAMPOS DE INPUT E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O UPDATE 
             */

            function CallFormEditar(id) {

                if (verifiquePermissaoEditar() === true) {



                    $("#div-protocols").empty();

                    $("#div-row-inputs").empty();

                    window.location.href = "#";

                    div_row_inputs = document.getElementById("div-row-inputs");

                    divLabelNumero = document.createElement("div");
                    divLabelNome = document.createElement("div");
                    divLabelFolhas = document.createElement("div");
                    divLabelCor = document.createElement("div");
                    divLabelInicio = document.createElement("div");
                    divLabelFim = document.createElement("div");
                    divLabelDetalhes = document.createElement("div");

                    divLabelNumero.setAttribute("class", "col-25");
                    divLabelNome.setAttribute("class", "col-25");
                    divLabelFolhas.setAttribute("class", "col-25");
                    divLabelCor.setAttribute("class", "col-25");
                    divLabelInicio.setAttribute("class", "col-25");
                    divLabelFim.setAttribute("class", "col-25");
                    divLabelDetalhes.setAttribute("class", "col-25");

                    labelNumero = document.createElement("label");
                    labelNome = document.createElement("label");
                    labelFolhas = document.createElement("label");
                    labelCor = document.createElement("label");
                    labelInicio = document.createElement("label");
                    labelFim = document.createElement("label");
                    labelDetalhes = document.createElement("label");

                    labelNumero.setAttribute("for", "numero");
                    labelNome.setAttribute("for", "nome");
                    labelFolhas.setAttribute("for", "folhas");
                    labelCor.setAttribute("for", "cor");
                    labelInicio.setAttribute("for", "dtinicio");
                    labelFim.setAttribute("for", "dtfim");
                    labelDetalhes.setAttribute("for", "detalhes");

                    labelNumero.append("Número");
                    labelNome.append("Nome");
                    labelFolhas.append("N° Folhas");
                    labelCor.append("Cor");
                    labelInicio.append("Data Início");
                    labelFim.append("Data Término");
                    labelDetalhes.append("Detalhes");

                    divInputNumero = document.createElement("div");
                    divInputNome = document.createElement("div");
                    divInputFolhas = document.createElement("div");
                    divInputCor = document.createElement("div");
                    divInputInicio = document.createElement("div");
                    divInputFim = document.createElement("div");
                    divInputDetalhes = document.createElement("div");

                    divInputNumero.setAttribute("class", "col-75");
                    divInputNome.setAttribute("class", "col-75");
                    divInputFolhas.setAttribute("class", "col-75");
                    divInputCor.setAttribute("class", "col-75");
                    divInputInicio.setAttribute("class", "col-75");
                    divInputFim.setAttribute("class", "col-75");
                    divInputDetalhes.setAttribute("class", "col-75");

                    inputNumero = document.createElement("input");
                    inputNome = document.createElement("input");
                    inputFolhas = document.createElement("input");
                    inputCor = document.createElement("input");
                    inputInicio = document.createElement("input");
                    inputFim = document.createElement("input");
                    inputDetalhes = document.createElement("textarea");

                    inputNumero.setAttribute("type", "number");
                    inputNumero.setAttribute("required", "required");
                    inputNumero.setAttribute("id", "numero");
                    inputNumero.setAttribute("name", "numero");
                    inputNumero.setAttribute("placeholder", "obrigatório");

                    inputNome.setAttribute("type", "text");
                    inputNome.setAttribute("required", "required");
                    inputNome.setAttribute("id", "nome");
                    inputNome.setAttribute("name", "nome");
                    inputNome.setAttribute("placeholder", "obrigatório");

                    inputFolhas.setAttribute("type", "number");
                    inputFolhas.setAttribute("required", "required");
                    inputFolhas.setAttribute("id", "folhas");
                    inputFolhas.setAttribute("name", "folhas");
                    inputFolhas.setAttribute("placeholder", "obrigatório");

                    inputCor.setAttribute("type", "text");
                    inputCor.setAttribute("id", "cor");
                    inputCor.setAttribute("name", "cor");

                    inputInicio.setAttribute("type", "date");
                    inputInicio.setAttribute("id", "dtinicio");
                    inputInicio.setAttribute("name", "dtinicio");

                    inputFim.setAttribute("type", "date");
                    inputFim.setAttribute("id", "dtfim");
                    inputFim.setAttribute("name", "dtfim");

                    inputDetalhes.setAttribute("style", "height:100px;");
                    inputDetalhes.setAttribute("id", "detalhes");
                    inputDetalhes.setAttribute("name", "detalhes");

                    br = document.createElement("br");

                    inputSubmitSalvar = document.createElement("input");
                    inputSubmitCancelar = document.createElement("input");

                    inputSubmitSalvar.setAttribute("type", "submit");
                    inputSubmitSalvar.setAttribute("style", "margin-top: 10px;");
                    inputSubmitSalvar.setAttribute("id", "btn_save");
                    inputSubmitSalvar.setAttribute("onclick", "SalveEdition();");
                    inputSubmitSalvar.setAttribute("value", "Salvar");

                    inputSubmitCancelar.setAttribute("type", "submit");
                    inputSubmitCancelar.setAttribute("class", "btn-danger");
                    inputSubmitCancelar.setAttribute("onclick", "RemoveForm();");
                    inputSubmitCancelar.setAttribute("value", "Cancelar");

                    divLabelNumero.appendChild(labelNumero);
                    divLabelNome.appendChild(labelNome);
                    divLabelFolhas.appendChild(labelFolhas);
                    divLabelCor.appendChild(labelCor);
                    divLabelInicio.appendChild(labelInicio);
                    divLabelFim.appendChild(labelFim);
                    divLabelDetalhes.appendChild(labelDetalhes);

                    divInputNumero.appendChild(inputNumero);
                    divInputNome.appendChild(inputNome);
                    divInputFolhas.appendChild(inputFolhas);
                    divInputCor.appendChild(inputCor);
                    divInputInicio.appendChild(inputInicio);
                    divInputFim.appendChild(inputFim);
                    divInputDetalhes.appendChild(inputDetalhes);

                    div_row_inputs.appendChild(divLabelNumero);
                    div_row_inputs.appendChild(divInputNumero);
                    div_row_inputs.appendChild(divLabelNome);
                    div_row_inputs.appendChild(divInputNome);
                    div_row_inputs.appendChild(divLabelFolhas);
                    div_row_inputs.appendChild(divInputFolhas);
                    div_row_inputs.appendChild(divLabelCor);
                    div_row_inputs.appendChild(divInputCor);
                    div_row_inputs.appendChild(divLabelInicio);
                    div_row_inputs.appendChild(divInputInicio);
                    div_row_inputs.appendChild(divLabelFim);
                    div_row_inputs.appendChild(divInputFim);
                    div_row_inputs.appendChild(divLabelDetalhes);
                    div_row_inputs.appendChild(divInputDetalhes);
                    div_row_inputs.appendChild(br);
                    div_row_inputs.appendChild(inputSubmitSalvar);
                    div_row_inputs.appendChild(inputSubmitCancelar);

                    var metodo = "livro/listarLivros";

                    $.ajax
                            ({
                                url: uri + metodo,
                                type: 'GET',
                                data: {},
                                beforeSend: function () {
                                    //AlertModal("ENTRANDO...");
                                }
                            })
                            .done(function (returnJson) {

                                // PREENCHE O FORM
                                for (var i = 0; i < livros.length; i++) {

                                    if (livros[i].id === parseInt(id)) {



                                        document.getElementById("numero").value = livros[i].numero;
                                        document.getElementById("nome").value = livros[i].nome;
                                        document.getElementById("folhas").value = livros[i].folhas;
                                        document.getElementById("cor").value = livros[i].cor;
                                        document.getElementById("dtinicio").value = livros[i].dataIni;
                                        document.getElementById("dtfim").value = livros[i].dataFi;
                                        document.getElementById("detalhes").append(livros[i].detalhes);

                                    }

                                }
                            })
                            .fail(function (msg) {
                                AlertModal("Falha ao tentar obter o livro escolhido");
                                console.log(msg);
                            });

                } else {
                    AlertModal("Usuário sem permissão!");
                }
            }

            /* 
             *  **********   FUNÇÃO PARA CHAMAR A EXIBIÇÃO DO MODAL 
             *  ********** QUE APRESENTA AS OPÇÕES DE EXCLUIR E EDITAR
             */

            function chamaModal(id) {

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();

                div = document.createElement("div");
                div.setAttribute("style", "");

                div.append("Selecione o que deseja fazer:");

                sendMensage.appendChild(div);

                excluir = document.createElement("input");
                excluir.setAttribute("type", "submit");
                excluir.setAttribute("value", "excluir");
                excluir.setAttribute("class", "btn-danger");
                excluir.setAttribute("onclick", "ConfirmExclusao(" + id + ")");

                editar = document.createElement("input");
                editar.setAttribute("type", "submit");
                editar.setAttribute("value", "editar");
                editar.setAttribute("style", "margin-right: 10px; margin-top: 10px;");
                editar.setAttribute("onclick", "CallFormEditar(" + id + ")");

                if (localStorage.getItem('sdw3354SD&@!5231') === 'S') {
                    sendMensage.appendChild(excluir);
                }

                if (localStorage.getItem('zXGT*&&!3YHRU+|D') === 'S') {
                    sendMensage.appendChild(editar);
                }

                window.location.href = "#popup1";
            }

            /* 
             *  **********   FUNÇÃO PARA OBTER OS CAMPOS DO INPUT E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O INSERT (CADASTRAR LIVRO) 
             */

            function SendFormCadastrar() {

                if (verifiquePermissaoInserir() === true) {

                    if (ValidaCampos() === true) {

                        numero = document.getElementById("numero").value;
                        nome = document.getElementById("nome").value;
                        folhas = document.getElementById("folhas").value;
                        cor = document.getElementById("cor").value;
                        dtinicio = document.getElementById("dtinicio").value;
                        detalhes = document.getElementById("detalhes").value;

                        var metodo = "livro/cadastrarLivro";

                        $.ajax
                                ({
                                    url: uri + metodo,
                                    type: 'POST',
                                    data: JSON.stringify(
                                            {
                                                "folhas": folhas,
                                                "numero": numero,
                                                "nome": nome,
                                                "detalhes": detalhes,
                                                "cor": cor,
                                                "dataInicio": dtinicio
                                            }),
                                    contentType: 'application/json',
                                    beforeSend: function () {
                                        //AlertModal("ENTRANDO...");
                                    }
                                })
                                .done(function (returnJson) {

                                    if (returnJson.numero === parseInt(numero)) {

                                        AlertModal("Sucesso!");

                                        cleanInputs();
                                    } else {

                                        AlertModal("O servidor retornou um erro inesperado!");

                                    }

                                })
                                .fail(function (msg) {
                                    AlertModal("Falha ao tentar cadastrar livro");
                                    console.log(msg);
                                });
                    } else {
                        AlertModal("Exitem campos com preenchimento inválido!");
                    }
                } else {

                    AlertModal("Usuário sem permissão!");

                }

            }

            /* 
             *  **********   FUNÇÃO PARA LIMPAR TODOS OS CAMPOS DA TELA 
             */

            function cleanInputs() {

                document.getElementById("numero").value = "";
                document.getElementById("nome").value = "";
                document.getElementById("folhas").value = "";
                document.getElementById("cor").value = "";
                document.getElementById("dtinicio").value = "";
                document.getElementById("detalhes").value = "";


            }

            /* 
             *  **********   FUNÇÃO PARA CHAMAR O FORMULÁRIO DE CADASTRO DE LIVRO 
             *  **********          E REMOVER A TABELA DE LIVROS DA TELA
             */

            function CallFormCadastrar() {

                $("#div-protocols").empty();

                div_row_inputs = document.getElementById("div-row-inputs");

                divLabelNumero = document.createElement("div");
                divLabelNome = document.createElement("div");
                divLabelFolhas = document.createElement("div");
                divLabelCor = document.createElement("div");
                divLabelInicio = document.createElement("div");
                divLabelDetalhes = document.createElement("div");

                divLabelNumero.setAttribute("class", "col-25");
                divLabelNome.setAttribute("class", "col-25");
                divLabelFolhas.setAttribute("class", "col-25");
                divLabelCor.setAttribute("class", "col-25");
                divLabelInicio.setAttribute("class", "col-25");
                divLabelDetalhes.setAttribute("class", "col-25");

                labelNumero = document.createElement("label");
                labelNome = document.createElement("label");
                labelFolhas = document.createElement("label");
                labelCor = document.createElement("label");
                labelInicio = document.createElement("label");
                labelDetalhes = document.createElement("label");

                labelNumero.setAttribute("for", "numero");
                labelNome.setAttribute("for", "nome");
                labelFolhas.setAttribute("for", "folhas");
                labelCor.setAttribute("for", "cor");
                labelInicio.setAttribute("for", "dtinicio");
                labelDetalhes.setAttribute("for", "detalhes");

                labelNumero.append("Número");
                labelNome.append("Nome");
                labelFolhas.append("N° Folhas");
                labelCor.append("Cor");
                labelInicio.append("Data Início");
                labelDetalhes.append("Detalhes");

                divInputNumero = document.createElement("div");
                divInputNome = document.createElement("div");
                divInputFolhas = document.createElement("div");
                divInputCor = document.createElement("div");
                divInputInicio = document.createElement("div");
                divInputDetalhes = document.createElement("div");

                divInputNumero.setAttribute("class", "col-75");
                divInputNome.setAttribute("class", "col-75");
                divInputFolhas.setAttribute("class", "col-75");
                divInputCor.setAttribute("class", "col-75");
                divInputInicio.setAttribute("class", "col-75");
                divInputDetalhes.setAttribute("class", "col-75");

                inputNumero = document.createElement("input");
                inputNome = document.createElement("input");
                inputFolhas = document.createElement("input");
                inputCor = document.createElement("input");
                inputInicio = document.createElement("input");
                inputDetalhes = document.createElement("textarea");

                inputNumero.setAttribute("type", "number");
                inputNumero.setAttribute("required", "required");
                inputNumero.setAttribute("id", "numero");
                inputNumero.setAttribute("name", "numero");
                inputNumero.setAttribute("placeholder", "obrigatório");

                inputNome.setAttribute("type", "text");
                inputNome.setAttribute("required", "required");
                inputNome.setAttribute("id", "nome");
                inputNome.setAttribute("name", "nome");
                inputNome.setAttribute("placeholder", "obrigatório");

                inputFolhas.setAttribute("type", "number");
                inputFolhas.setAttribute("required", "required");
                inputFolhas.setAttribute("id", "folhas");
                inputFolhas.setAttribute("name", "folhas");
                inputFolhas.setAttribute("placeholder", "obrigatório");

                inputCor.setAttribute("type", "text");
                inputCor.setAttribute("id", "cor");
                inputCor.setAttribute("name", "cor");

                inputInicio.setAttribute("type", "date");
                inputInicio.setAttribute("id", "dtinicio");
                inputInicio.setAttribute("name", "dtinicio");

                inputDetalhes.setAttribute("style", "height:100px;");
                inputDetalhes.setAttribute("id", "detalhes");
                inputDetalhes.setAttribute("name", "detalhes");

                br = document.createElement("br");

                inputSubmitSalvar = document.createElement("input");
                inputSubmitCancelar = document.createElement("input");

                inputSubmitSalvar.setAttribute("type", "submit");
                inputSubmitSalvar.setAttribute("style", "margin-top: 10px;");
                inputSubmitSalvar.setAttribute("id", "btn_save");
                inputSubmitSalvar.setAttribute("onclick", "SendFormCadastrar();");
                inputSubmitSalvar.setAttribute("value", "Salvar");

                inputSubmitCancelar.setAttribute("type", "submit");
                inputSubmitCancelar.setAttribute("class", "btn-danger");
                inputSubmitCancelar.setAttribute("onclick", "RemoveForm();");
                inputSubmitCancelar.setAttribute("value", "Cancelar");

                divLabelNumero.appendChild(labelNumero);
                divLabelNome.appendChild(labelNome);
                divLabelFolhas.appendChild(labelFolhas);
                divLabelCor.appendChild(labelCor);
                divLabelInicio.appendChild(labelInicio);
                divLabelDetalhes.appendChild(labelDetalhes);

                divInputNumero.appendChild(inputNumero);
                divInputNome.appendChild(inputNome);
                divInputFolhas.appendChild(inputFolhas);
                divInputCor.appendChild(inputCor);
                divInputInicio.appendChild(inputInicio);
                divInputDetalhes.appendChild(inputDetalhes);

                div_row_inputs.appendChild(divLabelNumero);
                div_row_inputs.appendChild(divInputNumero);
                div_row_inputs.appendChild(divLabelNome);
                div_row_inputs.appendChild(divInputNome);
                div_row_inputs.appendChild(divLabelFolhas);
                div_row_inputs.appendChild(divInputFolhas);
                div_row_inputs.appendChild(divLabelCor);
                div_row_inputs.appendChild(divInputCor);
                div_row_inputs.appendChild(divLabelInicio);
                div_row_inputs.appendChild(divInputInicio);
                div_row_inputs.appendChild(divLabelDetalhes);
                div_row_inputs.appendChild(divInputDetalhes);
                div_row_inputs.appendChild(br);
                div_row_inputs.appendChild(inputSubmitSalvar);
                div_row_inputs.appendChild(inputSubmitCancelar);

            }

            /* 
             *  **********       CHAMADO ATRAVES DO BOTÃO CANCELAR CADASTRO 
             *  ********** FUNÇÃO QUE OCULTA O FORMULÁRIO E CHAMA A TABELA DE LIVROS 
             */

            function RemoveForm() {

                $("#div-protocols").empty();

                $("#div-row-inputs").empty();

                GetListLivros();

            }

            /* 
             *  **********   FUNÇÃO PARA EXIBIR TODOS OS LIVROS CADASTRADOS 
             *  **********  REALIZAR UMA CHAMADA JSON PARA RECEBER OS DADOS
             *  **********           CRIAR UMA TABELA E PREENCHER 
             */

            function GetListLivros() {

                var metodo = "livro/listarLivros";

                $.ajax
                        ({
                            url: uri + metodo,
                            type: 'GET',
                            data: {},
                            beforeSend: function () {
                                //AlertModal("ENTRANDO...");
                            }
                        })
                        .done(function (returnJson) {

                            //var livros = JSON.parse(returnJson);

                            livros = returnJson;

                            // PEGA A DIV PAI E ESVAZIA ELA
                            tdiv = document.getElementById("div-protocols");
                            $("#div-protocols").empty();



                            // CRIA A TABELA E SETA OS ATRIBUTOS
                            ttable = document.createElement("table");
                            ttable.setAttribute("class", "rwd-table");
                            ttable.setAttribute("id", "table-protocols");

                            // CRIA O THEAD E O TBODY E SETA OS ATRIBUTOS
                            tthead = document.createElement("thead");
                            ttbody = document.createElement("tbody");
                            ttbody.setAttribute("id", "tboby-protocols");

                            // CRIA A LINHA DO TÍTULO E AS COLUNAS E INSERI AS STRINGS
                            trowhead = document.createElement("tr");

                            tcolNumerohead = document.createElement("th");
                            tcolNomehead = document.createElement("th");
                            tcolFolhashead = document.createElement("th");
                            tcolCorhead = document.createElement("th");
                            tcolIniciohead = document.createElement("th");
                            tcolFimhead = document.createElement("th");
                            tcolDetalheshead = document.createElement("th");

                            tcolNumerohead.append("Número");
                            tcolNomehead.append("Nome");
                            tcolFolhashead.append("Folhas");
                            tcolCorhead.append("Cor");
                            tcolIniciohead.append("Abertura");
                            tcolFimhead.append("Término");
                            tcolDetalheshead.append("Detalhes");

                            // INSERI AS COLUNAS DO TÍTULO NA LINHA DO TÍTULO
                            trowhead.appendChild(tcolNumerohead);
                            trowhead.appendChild(tcolNomehead);
                            trowhead.appendChild(tcolFolhashead);
                            trowhead.appendChild(tcolCorhead);
                            trowhead.appendChild(tcolIniciohead);
                            trowhead.appendChild(tcolFimhead);
                            trowhead.appendChild(tcolDetalheshead);

                            // INSERI A LINHA DO TÍTULO NO THEAD
                            tthead.appendChild(trowhead);

                            // INSERI O THEAD E O TBODY DENTRO DA TABELA
                            ttable.appendChild(tthead);
                            ttable.appendChild(ttbody);

                            // INSERI A TABELA DENTRO DA DIV
                            tdiv.appendChild(ttable);

                            // /\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
                            // \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/

                            // ITERA O JSON (LINHA A LINHA) E CHAMA O METODO QUE PREENCHE A TABELA
                            for (var i = 0; i < livros.length; i++) {

                                PreencheTboby(livros[i], i);

                            }

                            function PreencheTboby(livro, i) {

                                // CRIA A LINHA
                                trow = document.createElement("tr");
                                if ((verifiquePermissaoEditar() === true) || (verifiquePermissaoExcluir() === true)) {
                                    trow.setAttribute("onclick", "chamaModal(" + livro.id + ")");
                                }

                                trow.setAttribute("id", "line" + i);

                                trow.setAttribute("onmouseover", "linhaI('line" + i + "')");
                                trow.setAttribute("onmouseout", "linhaO('line" + i + "')");

                                // CRIA AS COLUNAS
                                tcolNumero = document.createElement("td");
                                tcolNome = document.createElement("td");
                                tcolFolhas = document.createElement("td");
                                tcolCor = document.createElement("td");
                                tcolInicio = document.createElement("td");
                                tcolFim = document.createElement("td");
                                tcolDetalhes = document.createElement("td");

                                // ADICIONA ATRIBUTOS A COLUNA QUE GARANTE O TITULO NA RESPONSIVIDADE
                                tcolNumero.setAttribute("data-th", "Número");
                                tcolNome.setAttribute("data-th", "Nome");
                                tcolFolhas.setAttribute("data-th", "Folhas");
                                tcolCor.setAttribute("data-th", "Cor");
                                tcolInicio.setAttribute("data-th", "Abertura");
                                tcolFim.setAttribute("data-th", "Término");
                                tcolDetalhes.setAttribute("data-th", "Detalhes");

                                // INSERI O CONTEUDO DO JSON NA COLUNA DO CORPO DA TABELA
                                tcolNumero.append(livro.numero);
                                tcolNome.append(livro.nome);
                                tcolFolhas.append(livro.folhas);
                                tcolCor.append(livro.cor);
                                tcolInicio.append(livro.dtIni);
                                tcolFim.append(livro.dtFim);
                                tcolDetalhes.append(livro.detalhes);

                                // INSERI AS COLUNAS DENTRO DA LINHA
                                trow.appendChild(tcolNumero);
                                trow.appendChild(tcolNome);
                                trow.appendChild(tcolFolhas);
                                trow.appendChild(tcolCor);
                                trow.appendChild(tcolInicio);
                                trow.appendChild(tcolFim);
                                trow.appendChild(tcolDetalhes);

                                // INSERI O CORPO DENTRO DA TABELA
                                ttbody.appendChild(trow);

                            }

                        })
                        .fail(function (msg) {
                            AlertModal("Falha ao tentar obter a lista de livros");
                            console.log(msg);
                        });

            }

        </script>

    </head>

    <body onload="GetListLivros();
            exibeButtonInserir();">

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ NAV MENU \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <nav class="pushy pushy-left" data-focus="#first-link">
            <div class="pushy-content">
                <ul>
                    <li class="pushy-link"><a href="protocolos.html">Protocolos</a></li>
                    <li class="pushy-link"><a href="livros.html">Livros</a></li>
                    <li class="pushy-link"><a href="pessoas.html">Pessoas</a></li>
                    <li class="pushy-link"><a href="motivos.html">Motivos</a></li>
                    <li class="pushy-link"><a href="situacoes.html">Situações</a></li>
                    <li class="pushy-link"><a href="javascript:logout();">Sair</a></li>
                </ul>
            </div>
        </nav>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV MENU \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="container" style="padding-left:0px;padding-top:40px;padding-bottom:0px;height:50px;">
            <!-- Menu Button -->
            <button class="menu-btn">&#9776; Menu</button>
            <div id="img_option_cadastrar" >
            </div>
        </div>

        <!-- Pushy JS -->
        <script src="assest/js/pushy.min.js"></script>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ TÍTULO \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->

        <h1 style="color: floralwhite; text-align: center; text-shadow:#000 1px -1px, #000 -1px 1px, #000 1px 1px, #000 -1px -1px" >
            Livros
        </h1>

        <br/>
        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV TABELA \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="div-protocols" >

        </div>


        <div id="popup1" class="overlay">
            <div class="popup">
                <h2 style="text-align: center;">Mensagem:</h2>
                <a class="close" href="#">&times;</a>
                <div class="content" id="sendMensage">
                </div>
            </div>
        </div>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV FORM \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="div-create-protocol" >

            <div class="container">

                <div class="row" id="div-row-inputs" >

                </div>

            </div>

        </div>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV RODAPE \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div>
            <footer class="footer" style="color: floralwhite; text-align: center; text-shadow:#000 1px -1px, #000 -1px 1px, #000 1px 1px, #000 -1px -1px" >
                <!--FOOER AREA END-->
                <p>Desenvolvido pela turma de Sistemas para Internet<br/> Faculdade Anísio Teixeira - 2018.2</p>
            </footer>
        </div>

    </body>

</html>
