<!DOCTYPE html>

<html lang="pt-br" >

    <head>

        <meta charset="UTF-8">

        <!--====== TITLE TAG ======-->
        <title>Gerenciador de Protocolos</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="assest/js/vendor/jquery-1.12.4.min.js"></script>

        <!--====== FAVICON ICON =======-->
        <link rel="shortcut icon" type="image/ico" href="assest/img/favicon.png" />

        <!-- /\/\/\/\ TABLE RESPONSIVE /\/\/\/\ -->

        <link rel="stylesheet" href="assest/css/normalize.css">
        <link rel="stylesheet" href="assest/css/demo.css">
        <!-- Pushy CSS -->
        <link rel="stylesheet" href="assest/css/pushy.css">

        <script src="assest/js/project/dados_connection.js"></script>
        <script src="assest/js/project/control_user.js"></script>
        <script src="assest/js/project/alertas.js"></script>
        <!-- ===== TABLE RESPONSIVE ===== -->
        <link rel="stylesheet" href="assest/css/style.css">
        <link rel="stylesheet" href="assest/css/styles.css">


        <!-- \/\/\/\/\/\/\/\/ SCRIPTS JS \/\/\/\/\/\/\/\/ -->
        <script>

            /* 
             *  **********   FUNÇÃO PARA EXIBIR O BOTÃO DE INSERIR
             *  **********      APENAS DE USUÁRIO TIVER PERMISSÃO
             */

            function exibeButtonInserir() {

                if (verifiquePermissaoInserir() === true) {

                    divImg = document.getElementById("img_option_cadastrar");

                    image = document.createElement("img");
                    image.setAttribute("src", "assest/img/new.png");
                    image.setAttribute("height", "45");
                    image.setAttribute("style", "cursor:pointer;");
                    image.setAttribute("onclick", "CallFormCadastrar();");
                    image.setAttribute("width", "47");
                    image.setAttribute("title", "Adicionar");

                    divImg.append(image);
                }

            }

            /* 
             *  **********   FUNÇÃO PARA EXIBIR QUALQUER MENSAGEM NA TELA 
             *  **********  USANDO O MODAL QUE É CHAMADO PELA FUNÇÃO
             */

            function AlertModal(msg) {

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();
                sendMensage.append(msg);
                window.location.href = "#popup1";

            }

            /* 
             *  **********   IDENTIFICA O ATO DE ENTRAR NA LINHA COM O MOUSE
             *  ********** E ALTERA O ESTILO NA LINHA PARA DAR DESTAQUE 
             */

            function linhaI(id) {
                tr1 = document.getElementById(id);

                tr1.setAttribute("style", "background-color:#999;cursor:pointer;");
            }

            /* 
             *  **********   IDENTIFICA O ATO DE SAIR DA LINHA COM O MOUSE
             *  ********** E REMOVE O ESTILO DA LINHA PARA TIRAR O DESTAQUE 
             */

            function linhaO(id) {
                tr1 = document.getElementById(id);
                tr1.removeAttribute("style");
            }

            /* 
             *  **********   FUNÇÃO PARA SALVAR EDIAÇÃO E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O UPDATE 
             */

            function SalveEdition(id) {

                if (verifiquePermissaoEditar() === true) {

                    if (ValidaCampos() === true) {

                        motivo = document.getElementById("motivo").value;
                        descricao = document.getElementById("descricao").value;

                        var metodo = "motivo/editarMotivo";

                        $.ajax
                                ({
                                    url: uri + metodo,
                                    type: 'PUT',
                                    data: JSON.stringify(
                                            {
                                                id: id,
                                                motivo: motivo,
                                                descricao: descricao
                                            }),
                                    contentType: 'application/json',
                                    beforeSend: function () {
                                        //AlertModal("ENTRANDO...");
                                    }
                                })
                                .done(function (returnJson) {

                                    if (returnJson === "\"Erro\"") {

                                        AlertModal("O servidor retornou um erro inesperado!");

                                    } else {

                                        AlertModal("Sucesso!");
                                        RemoveForm();
                                        GetListUsuarios();

                                    }

                                })
                                .fail(function (msg) {
                                    AlertModal("Falha ao tentar editar o motivo");
                                    console.log(msg);
                                });


                    } else {
                        AlertModal("Exitem campos com preenchimento inválido!");
                    }

                } else {
                    AlertModal("Usuário sem permissão!");
                }

            }

            /* 
             *  **********   FUNÇÃO PARA VALIDAR OS CAMPOS DE INPUT 
             *  **********       ANTES DE ENVIAR O FORMULÁRIO 
             */

            function ValidaCampos() {

                noerros = true;

                nome = document.getElementById("nome");
                usuario = document.getElementById("user");
                senha = document.getElementById("senha");
                repete = document.getElementById("repete");

                if (nome.value === "") {
                    noerros = false;
                    nome.setAttribute("style", "background: palegoldenrod;");
                } else {
                    nome.removeAttribute("style");
                }

                if (usuario.value === "") {
                    noerros = false;
                    usuario.setAttribute("style", "background: palegoldenrod;");
                } else {
                    usuario.removeAttribute("style");
                }

                if (senha.value === "") {
                    noerros = false;
                    senha.setAttribute("style", "background: palegoldenrod;");
                } else {
                    senha.removeAttribute("style");
                }

                if (repete.value === "") {
                    noerros = false;
                    repete.setAttribute("style", "background: palegoldenrod;");
                } else {
                    repete.removeAttribute("style");
                }

                if (noerros === true) {

                    if (repete.value !== senha.value) {
                        repete.setAttribute("style", "background: palegoldenrod;");
                        senha.setAttribute("style", "background: palegoldenrod;");
                        AlertModal("Senhas não conferem!");
                    } else {
                        repete.removeAttribute("style");
                        senha.removeAttribute("style");
                    }
                }

                return noerros;

            }

            /* 
             *  **********   FUNÇÃO PARA CONFIRMAR A EXCLUIR, 
             *  ********** REALIZAR ENVIO DO JSON COM O ID PARA FAZER O UPDATE 
             */

            function RemoveItem(id) {

                var metodo = "usuario/deletarUsuario";
                tokin = getToken();

                id = parseInt(id);

                $.ajax
                        ({
                            url: uri + metodo + "?idUsuario=" + id,
                            type: 'DELETE',
                            data: {},
                            beforeSend: function () {
                                //AlertModal("ENTRANDO...");
                            }
                        })
                        .done(function (returnJson) {

                            console.log(returnJson);

                            if (returnJson === "\"Erro\"") {
                                AlertModal("Não foi possível realizar a exclusão!");
                            } else {
                                AlertModal("Exclusão realizada com sucesso!");
                                GetListUsuarios();
                            }

                        })
                        .fail(function (msg) {

                            AlertModal("Falha ao solicitar a operação");

                            console.log(msg);
                        });


            }

            /* 
             *  **********   FUNÇÃO PARA CONFIRMAR A EXCLUISÃO. 
             *  ********** REALIZAR A PERGUNTA SE DESEJA REALMENTE EXCLUIR 
             */

            function ConfirmExclusao(id) {

                CloseModal();

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();

                div = document.createElement("div");
                div.setAttribute("style", "");

                div.append("Tem certeza que deseja excuir?");

                sendMensage.appendChild(div);

                confirm = document.createElement("input");
                confirm.setAttribute("type", "submit");
                confirm.setAttribute("value", "Confirmar");
                confirm.setAttribute("class", "btn-danger");
                confirm.setAttribute("onclick", "RemoveItem(" + id + ")");

                cancelar = document.createElement("input");
                cancelar.setAttribute("type", "submit");
                cancelar.setAttribute("value", "Cancelar");
                cancelar.setAttribute("style", "margin-right: 10px; margin-top: 10px;");
                cancelar.setAttribute("onclick", "CloseModal();");

                sendMensage.appendChild(cancelar);
                sendMensage.appendChild(confirm);

                window.location.href = "#popup1";

            }

            /* 
             *  **********   FUNÇÃO PARA FECHAR O MODAL 
             */

            function CloseModal() {

                window.location.href = "#";

            }

            /* 
             *  **********   FUNÇÃO PARA OBTER OS CAMPOS DE INPUT E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O UPDATE 
             */

            function CallFormEditar(id) {

                if (verifiquePermissaoEditar() === true) {

                    $("#div-protocols").empty();

                    $("#div-row-inputs").empty();

                    window.location.href = "#";

                    div_row_inputs = document.getElementById("div-row-inputs");

                    divLabelMotivo = document.createElement("div");
                    divLabelDescricao = document.createElement("div");

                    divLabelMotivo.setAttribute("class", "col-25");
                    divLabelDescricao.setAttribute("class", "col-25");

                    labelMotivo = document.createElement("label");
                    labelDescricao = document.createElement("label");

                    labelMotivo.setAttribute("for", "motivo");
                    labelDescricao.setAttribute("for", "descricao");

                    labelMotivo.append("Motivo");
                    labelDescricao.append("Descrição");

                    divInputMotivo = document.createElement("div");
                    divInputDescricao = document.createElement("div");

                    divInputMotivo.setAttribute("class", "col-75");
                    divInputDescricao.setAttribute("class", "col-75");

                    inputMotivo = document.createElement("input");
                    inputDescricao = document.createElement("textarea");

                    inputMotivo.setAttribute("type", "text");
                    inputMotivo.setAttribute("required", "required");
                    inputMotivo.setAttribute("id", "motivo");
                    inputMotivo.setAttribute("name", "motivo");
                    inputMotivo.setAttribute("placeholder", "obrigatório");

                    inputDescricao.setAttribute("style", "height:100px;");
                    inputDescricao.setAttribute("id", "descricao");
                    inputDescricao.setAttribute("name", "descricao");

                    br = document.createElement("br");

                    inputSubmitSalvar = document.createElement("input");
                    inputSubmitCancelar = document.createElement("input");

                    inputSubmitSalvar.setAttribute("type", "submit");
                    inputSubmitSalvar.setAttribute("style", "margin-top: 10px;");
                    inputSubmitSalvar.setAttribute("id", "btn_save");
                    inputSubmitSalvar.setAttribute("onclick", "SalveEdition(" + id + ");");
                    inputSubmitSalvar.setAttribute("value", "Salvar");

                    inputSubmitCancelar.setAttribute("type", "submit");
                    inputSubmitCancelar.setAttribute("class", "btn-danger");
                    inputSubmitCancelar.setAttribute("onclick", "RemoveForm();");
                    inputSubmitCancelar.setAttribute("value", "Cancelar");

                    divLabelMotivo.appendChild(labelMotivo);
                    divLabelDescricao.appendChild(labelDescricao);

                    divInputMotivo.appendChild(inputMotivo);
                    divInputDescricao.appendChild(inputDescricao);

                    div_row_inputs.appendChild(divLabelMotivo);
                    div_row_inputs.appendChild(divInputMotivo);
                    div_row_inputs.appendChild(divLabelDescricao);
                    div_row_inputs.appendChild(divInputDescricao);
                    div_row_inputs.appendChild(br);
                    div_row_inputs.appendChild(inputSubmitSalvar);
                    div_row_inputs.appendChild(inputSubmitCancelar);

                    var metodo = "motivo/listarMotivo";

                    $.ajax
                            ({
                                url: uri + metodo,
                                type: 'GET',
                                data: {},
                                beforeSend: function () {
                                    //AlertModal("ENTRANDO...");
                                }
                            })
                            .done(function (returnJson) {

                                var returnJson = JSON.parse(returnJson);

                                // PREENCHE O FORM
                                for (var i = 0; i < returnJson.length; i++) {

                                    if (returnJson[i].id === parseInt(id)) {

                                        document.getElementById("motivo").value = returnJson[i].motivo;
                                        if (returnJson[i].descricao) {
                                            document.getElementById("descricao").value = returnJson[i].descricao;
                                        }

                                    }

                                }
                            })
                            .fail(function (msg) {
                                AlertModal("Falha ao tentar obter o motivo escolhido");
                                console.log(msg);
                            });

                } else {
                    AlertModal("Usuário sem permissão!");
                }
            }

            /* 
             *  **********   FUNÇÃO PARA CHAMAR A EXIBIÇÃO DO MODAL 
             *  ********** QUE APRESENTA AS OPÇÕES DE EXCLUIR E EDITAR
             */

            function chamaModal(id) {

                sendMensage = document.getElementById("sendMensage");
                $("#sendMensage").empty();

                div = document.createElement("div");
                div.setAttribute("style", "");

                div.append("Selecione o que deseja fazer:");

                sendMensage.appendChild(div);

                excluir = document.createElement("input");
                excluir.setAttribute("type", "submit");
                excluir.setAttribute("value", "excluir");
                excluir.setAttribute("class", "btn-danger");
                excluir.setAttribute("onclick", "ConfirmExclusao(" + id + ")");

                editar = document.createElement("input");
                editar.setAttribute("type", "submit");
                editar.setAttribute("value", "editar");
                editar.setAttribute("style", "margin-right: 10px; margin-top: 10px;");
                editar.setAttribute("onclick", "CallFormEditar(" + id + ")");

                if (verifiquePermissaoExcluir() === true) {
                    sendMensage.appendChild(excluir);
                }

                if (verifiquePermissaoEditar() === true) {
                    sendMensage.appendChild(editar);
                }

                window.location.href = "#popup1";
            }

            /* 
             *  **********   FUNÇÃO PARA OBTER OS CAMPOS DO INPUT E 
             *  ********** REALIZAR ENVIO DO JSON PARA FAZER O INSERT (CADASTRAR) 
             */

            function SendFormCadastrar() {

                if (verifiquePermissaoInserir() === true) {

                    if (ValidaCampos() === true) {

                        nome = document.getElementById("nome").value;
                        user = document.getElementById("user").value;
                        senha = document.getElementById("senha").value;

                        //ler = document.getElementById("ler").checked;
                        inserir = document.getElementById("inserir").checked;
                        editar = document.getElementById("editar").checked;
                        excluir = document.getElementById("excluir").checked;

                        /*
                         if (ler === true) {
                         ler = 'S';
                         } else {
                         ler = 'N';
                         }
                         */
                        if (inserir === true) {
                            inserir = 'S';
                        } else {
                            inserir = 'N';
                        }
                        if (editar === true) {
                            editar = 'S';
                        } else {
                            editar = 'N';
                        }
                        if (excluir === true) {
                            excluir = 'S';
                        } else {
                            excluir = 'N';
                        }

                        var metodo = "usuario/cadastrarUsuario";

                        $.ajax
                                ({
                                    url: uri + metodo,
                                    type: 'POST',
                                    data: JSON.stringify(
                                            {
                                                nome: nome,
                                                user: user,
                                                senha: senha,
                                                permissao: {
                                                    write: inserir,
                                                    delete: excluir,
                                                    update: editar,
                                                    ler: 'S'
                                                }
                                            }),
                                    contentType: 'application/json',
                                    beforeSend: function () {
                                        //AlertModal("ENTRANDO...");
                                    }
                                })
                                .done(function (returnJson) {
                                    
                                    //var returnJson = JSON.parse(returnJson);

                                    if (returnJson.id) {

                                        AlertModal("Sucesso!");

                                        cleanInputs();

                                    } else {

                                        AlertModal("O servidor retornou um erro inesperado!");
                                        console.log(returnJson);
                                    }

                                })
                                .fail(function (msg) {
                                    AlertModal("Falha ao tentar cadastrar motivo");
                                    console.log(msg);
                                });
                    } else {
                        AlertModal("Exitem campos com preenchimento inválido!");
                        console.log(returnJson);
                    }
                } else {

                    AlertModal("Usuário sem permissão!");

                }

            }

            /* 
             *  **********   FUNÇÃO PARA LIMPAR TODOS OS CAMPOS DA TELA 
             */

            function cleanInputs() {

                document.getElementById("nome").value = "";
                document.getElementById("user").value = "";
                document.getElementById("senha").value = "";
                document.getElementById("repete").value = "";

                //document.getElementById("ler").checked = true;
                document.getElementById("inserir").checked = false;
                document.getElementById("editar").checked = false;
                document.getElementById("excluir").checked = false;

            }

            /* 
             *  **********   FUNÇÃO PARA CHAMAR O FORMULÁRIO DE CADASTRO
             *  **********          E REMOVER A TABELA DA TELA
             */

            function CallFormCadastrar() {

                $("#div-protocols").empty();

                div_row_inputs = document.getElementById("div-row-inputs");

                divLabelNome = document.createElement("div");
                divLabelUser = document.createElement("div");
                divLabelSenha = document.createElement("div");
                divLabelRepete = document.createElement("div");
                divLabelStatus = document.createElement("div");
                divLabelPermissoes = document.createElement("div");

                divLabelNome.setAttribute("class", "col-25");
                divLabelUser.setAttribute("class", "col-25");
                divLabelSenha.setAttribute("class", "col-25");
                divLabelRepete.setAttribute("class", "col-25");
                divLabelStatus.setAttribute("class", "col-25");
                divLabelPermissoes.setAttribute("class", "col-25");

                labelNome = document.createElement("label");
                labelUser = document.createElement("label");
                labelSenha = document.createElement("label");
                labelRepete = document.createElement("label");
                labelStatus = document.createElement("label");
                labelPermissoes = document.createElement("label");
                labelLer = document.createElement("label");
                labelInserir = document.createElement("label");
                labelEditar = document.createElement("label");
                labelExcluir = document.createElement("label");

                labelNome.setAttribute("for", "nome");
                labelUser.setAttribute("for", "user");
                labelSenha.setAttribute("for", "senha");
                labelRepete.setAttribute("for", "repete");
                labelStatus.setAttribute("for", "status");
                labelPermissoes.setAttribute("for", "permissoes");
                labelLer.setAttribute("for", "ler");
                labelInserir.setAttribute("for", "inserir");
                labelEditar.setAttribute("for", "editar");
                labelExcluir.setAttribute("for", "excluir");

                labelNome.append("nome");
                labelUser.append("Usuário");
                labelSenha.append("Senha");
                labelRepete.append("Repetir Senha");
                labelStatus.append("Status");
                labelPermissoes.append("Permissões");
                labelLer.append("Ler");
                labelInserir.append("Inserir");
                labelEditar.append("Editar");
                labelExcluir.append("Excluir");

                divInputNome = document.createElement("div");
                divInputUser = document.createElement("div");
                divInputSenha = document.createElement("div");
                divInputRepete = document.createElement("div");
                divInputStatus = document.createElement("div");
                divInputPermissoes = document.createElement("div");

                divInputNome.setAttribute("class", "col-75");
                divInputUser.setAttribute("class", "col-75");
                divInputSenha.setAttribute("class", "col-75");
                divInputRepete.setAttribute("class", "col-75");
                divInputStatus.setAttribute("class", "col-75");
                divInputPermissoes.setAttribute("class", "col-75");

                inputNome = document.createElement("input");
                inputUser = document.createElement("input");
                inputSenha = document.createElement("input");
                inputRepete = document.createElement("input");
                inputStatus = document.createElement("select");
                inputLer = document.createElement("input");
                inputInserir = document.createElement("input");
                inputEditar = document.createElement("input");
                inputExcluir = document.createElement("input");
                optionAtivado = document.createElement("option");
                optionDesativado = document.createElement("option");

                optionAtivado.append("Ativado");
                optionDesativado.append("Desativado");

                optionAtivado.setAttribute("value", "A");
                optionDesativado.setAttribute("value", "D");

                inputNome.setAttribute("type", "text");
                inputNome.setAttribute("required", "required");
                inputNome.setAttribute("id", "nome");
                inputNome.setAttribute("name", "nome");
                inputNome.setAttribute("placeholder", "obrigatório");

                inputUser.setAttribute("type", "text");
                inputUser.setAttribute("required", "required");
                inputUser.setAttribute("id", "user");
                inputUser.setAttribute("name", "user");
                inputUser.setAttribute("placeholder", "obrigatório");

                inputSenha.setAttribute("type", "password");
                inputSenha.setAttribute("required", "required");
                inputSenha.setAttribute("id", "senha");
                inputSenha.setAttribute("name", "senha");
                inputSenha.setAttribute("placeholder", "obrigatório");

                inputRepete.setAttribute("type", "password");
                inputRepete.setAttribute("required", "required");
                inputRepete.setAttribute("id", "repete");
                inputRepete.setAttribute("name", "repete");
                inputRepete.setAttribute("placeholder", "obrigatório");

                inputStatus.setAttribute("id", "status");
                inputRepete.setAttribute("name", "status");

                inputLer.setAttribute("type", "checkbox");
                inputLer.setAttribute("id", "ler");
                inputLer.setAttribute("checked", "checked");

                inputInserir.setAttribute("type", "checkbox");
                inputInserir.setAttribute("id", "inserir");

                inputEditar.setAttribute("type", "checkbox");
                inputEditar.setAttribute("id", "editar");

                inputExcluir.setAttribute("type", "checkbox");
                inputExcluir.setAttribute("id", "excluir");

                br = document.createElement("br");

                inputSubmitSalvar = document.createElement("input");
                inputSubmitCancelar = document.createElement("input");

                inputSubmitSalvar.setAttribute("type", "submit");
                inputSubmitSalvar.setAttribute("style", "margin-top: 10px;");
                inputSubmitSalvar.setAttribute("id", "btn_save");
                inputSubmitSalvar.setAttribute("onclick", "SendFormCadastrar();");
                inputSubmitSalvar.setAttribute("value", "Salvar");

                inputSubmitCancelar.setAttribute("type", "submit");
                inputSubmitCancelar.setAttribute("class", "btn-danger");
                inputSubmitCancelar.setAttribute("onclick", "RemoveForm();");
                inputSubmitCancelar.setAttribute("value", "Cancelar");

                inputStatus.appendChild(optionAtivado);
                inputStatus.appendChild(optionDesativado);

                divLabelNome.appendChild(labelNome);
                divLabelUser.appendChild(labelUser);
                divLabelSenha.appendChild(labelSenha);
                divLabelRepete.appendChild(labelRepete);
                divLabelStatus.appendChild(labelStatus);
                divLabelPermissoes.appendChild(labelPermissoes);

                divInputNome.appendChild(inputNome);
                divInputUser.appendChild(inputUser);
                divInputSenha.appendChild(inputSenha);
                divInputRepete.appendChild(inputRepete);
                divInputStatus.appendChild(inputStatus);

                //divInputPermissoes.appendChild(labelLer);
                //divInputPermissoes.appendChild(inputLer);
                divInputPermissoes.appendChild(labelInserir);
                divInputPermissoes.appendChild(inputInserir);
                divInputPermissoes.appendChild(labelEditar);
                divInputPermissoes.appendChild(inputEditar);
                divInputPermissoes.appendChild(labelExcluir);
                divInputPermissoes.appendChild(inputExcluir);

                div_row_inputs.appendChild(divLabelNome);
                div_row_inputs.appendChild(divInputNome);
                div_row_inputs.appendChild(divLabelUser);
                div_row_inputs.appendChild(divInputUser);
                div_row_inputs.appendChild(divLabelSenha);
                div_row_inputs.appendChild(divInputSenha);
                div_row_inputs.appendChild(divLabelRepete);
                div_row_inputs.appendChild(divInputRepete);
                //div_row_inputs.appendChild(divLabelStatus);
                //div_row_inputs.appendChild(divInputStatus);
                div_row_inputs.appendChild(divLabelPermissoes);
                div_row_inputs.appendChild(divInputPermissoes);
                div_row_inputs.appendChild(br);
                div_row_inputs.appendChild(inputSubmitSalvar);
                div_row_inputs.appendChild(inputSubmitCancelar);


            }

            /* 
             *  **********       CHAMADO ATRAVES DO BOTÃO CANCELAR CADASTRO 
             *  ********** FUNÇÃO QUE OCULTA O FORMULÁRIO E CHAMA A TABELA
             */

            function RemoveForm() {

                $("#div-protocols").empty();

                $("#div-row-inputs").empty();

                GetListUsuarios();

            }

            /* 
             *  **********   FUNÇÃO PARA EXIBIR TODOS OS OBJETOS CADASTRADOS 
             *  **********  REALIZAR UMA CHAMADA JSON PARA RECEBER OS DADOS
             *  **********           CRIAR UMA TABELA E PREENCHER 
             */

            function GetListUsuarios() {

                var metodo = "usuario/listarUsuario";

                $.ajax
                        ({
                            url: uri + metodo,
                            type: 'GET',
                            data: {},
                            beforeSend: function () {
                                //AlertModal("ENTRANDO...");
                            }
                        })
                        .done(function (returnJson) {

                            var usuarios = JSON.parse(returnJson);

                            // PEGA A DIV PAI E ESVAZIA ELA
                            tdiv = document.getElementById("div-protocols");
                            $("#div-protocols").empty();


                            // CRIA A TABELA E SETA OS ATRIBUTOS
                            ttable = document.createElement("table");
                            ttable.setAttribute("class", "rwd-table");
                            ttable.setAttribute("id", "table-protocols");

                            // CRIA O THEAD E O TBODY E SETA OS ATRIBUTOS
                            tthead = document.createElement("thead");
                            ttbody = document.createElement("tbody");
                            ttbody.setAttribute("id", "tboby-protocols");

                            // CRIA A LINHA DO TÍTULO E AS COLUNAS E INSERI AS STRINGS
                            trowhead = document.createElement("tr");

                            tcolNomeHead = document.createElement("th");
                            tcolUserHead = document.createElement("th");
                            tcolStatusHead = document.createElement("th");
                            tcolLerHead = document.createElement("th");
                            tcolinserirHead = document.createElement("th");
                            tcolEditarHead = document.createElement("th");
                            tcolExcluirHead = document.createElement("th");

                            tcolNomeHead.append("Nome");
                            tcolUserHead.append("Usuário");
                            tcolStatusHead.append("Situação");
                            tcolLerHead.append("Ler");
                            tcolinserirHead.append("Inserir");
                            tcolEditarHead.append("Editar");
                            tcolExcluirHead.append("Excluir");

                            // INSERI AS COLUNAS DO TÍTULO NA LINHA DO TÍTULO
                            trowhead.appendChild(tcolNomeHead);
                            trowhead.appendChild(tcolUserHead);
                            trowhead.appendChild(tcolStatusHead);
                            trowhead.appendChild(tcolLerHead);
                            trowhead.appendChild(tcolinserirHead);
                            trowhead.appendChild(tcolEditarHead);
                            trowhead.appendChild(tcolExcluirHead);

                            // INSERI A LINHA DO TÍTULO NO THEAD
                            tthead.appendChild(trowhead);

                            // INSERI O THEAD E O TBODY DENTRO DA TABELA
                            ttable.appendChild(tthead);
                            ttable.appendChild(ttbody);

                            // INSERI A TABELA DENTRO DA DIV
                            tdiv.appendChild(ttable);

                            // /\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\
                            // \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/

                            // ITERA O JSON (LINHA A LINHA) E CHAMA O METODO QUE PREENCHE A TABELA
                            for (var i = 0; i < usuarios.length; i++) {

                                PreencheTboby(usuarios[i], i);

                            }

                            function PreencheTboby(usuario, i) {

                                // CRIA A LINHA
                                trow = document.createElement("tr");
                                if ((verifiquePermissaoEditar() === true) || (verifiquePermissaoExcluir() === true)) {
                                    trow.setAttribute("onclick", "chamaModal(" + usuario.id + ")");
                                }

                                trow.setAttribute("id", "line" + i);

                                trow.setAttribute("onmouseover", "linhaI('line" + i + "')");
                                trow.setAttribute("onmouseout", "linhaO('line" + i + "')");

                                // CRIA AS COLUNAS
                                tcolNome = document.createElement("td");
                                tcolUser = document.createElement("td");
                                tcolStatus = document.createElement("td");
                                tcolLer = document.createElement("td");
                                tcolinserir = document.createElement("td");
                                tcolEditar = document.createElement("td");
                                tcolExcluir = document.createElement("td");

                                // ADICIONA ATRIBUTOS A COLUNA QUE GARANTE O TITULO NA RESPONSIVIDADE
                                tcolNome.setAttribute("data-th", "Nome");
                                tcolUser.setAttribute("data-th", "Usuário");
                                tcolStatus.setAttribute("data-th", "Situação");
                                tcolLer.setAttribute("data-th", "Ler");
                                tcolinserir.setAttribute("data-th", "Inserir");
                                tcolEditar.setAttribute("data-th", "Editar");
                                tcolExcluir.setAttribute("data-th", "Excluir");

                                // INSERI O CONTEUDO DO JSON NA COLUNA DO CORPO DA TABELA
                                if (usuario.nome) {
                                    tcolNome.append(usuario.nome);
                                }
                                if (usuario.user) {
                                    tcolUser.append(usuario.user);
                                }
                                if (usuario.status) {
                                    tcolStatus.append(usuario.status);
                                }
                                if (usuario.permissao.read) {
                                    tcolLer.append(usuario.permissao.read);
                                }
                                if (usuario.permissao.write) {
                                    tcolinserir.append(usuario.permissao.write);
                                }
                                if (usuario.permissao.update) {
                                    tcolEditar.append(usuario.permissao.update);
                                }
                                if (usuario.permissao.delete) {
                                    tcolExcluir.append(usuario.permissao.delete);
                                }

                                // INSERI AS COLUNAS DENTRO DA LINHA
                                trow.appendChild(tcolNome);
                                trow.appendChild(tcolUser);
                                trow.appendChild(tcolStatus);
                                trow.appendChild(tcolLer);
                                trow.appendChild(tcolinserir);
                                trow.appendChild(tcolEditar);
                                trow.appendChild(tcolExcluir);

                                // INSERI O CORPO DENTRO DA TABELA
                                ttbody.appendChild(trow);

                            }

                        })
                        .fail(function (msg) {
                            AlertModal("Falha ao tentar obter a lista de usuários");
                            console.log(msg);
                        });

            }

        </script>

    </head>

    <body onload="GetListUsuarios();
            exibeButtonInserir();">

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ NAV MENU \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <nav class="pushy pushy-left" data-focus="#first-link">
            <div class="pushy-content">
                <ul>
                    <li class="pushy-link"><a href="protocolos.html">Protocolos</a></li>
                    <li class="pushy-link"><a href="livros.html">Livros</a></li>
                    <li class="pushy-link"><a href="pessoas.html">Pessoas</a></li>
                    <li class="pushy-link"><a href="motivos.html">Motivos</a></li>
                    <li class="pushy-link"><a href="situacoes.html">Situações</a></li>
                    <li class="pushy-link"><a href="usuarios.html">Usuários</a></li>
                    <li class="pushy-link"><a href="javascript:logout();">Sair</a></li>
                </ul>
            </div>
        </nav>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV MENU \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="container" style="padding-left:0px;padding-top:40px;padding-bottom:0px;height:50px;">
            <!-- Menu Button -->
            <button class="menu-btn">&#9776; Menu</button>
            <div id="img_option_cadastrar" >
            </div>
        </div>

        <!-- Pushy JS -->
        <script src="assest/js/pushy.min.js"></script>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ TÍTULO \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->

        <h1 style="color: floralwhite; text-align: center; text-shadow:#000 1px -1px, #000 -1px 1px, #000 1px 1px, #000 -1px -1px" >
            Usuários
        </h1>

        <br/>
        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV TABELA \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="div-protocols" >

        </div>


        <div id="popup1" class="overlay">
            <div class="popup">
                <h2 style="text-align: center;">Mensagem:</h2>
                <a class="close" href="#">&times;</a>
                <div class="content" id="sendMensage">
                </div>
            </div>
        </div>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV FORM \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div id="div-create-protocol" >

            <div class="container">

                <div class="row" id="div-row-inputs" >

                </div>

            </div>

        </div>

        <!-- \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ DIV RODAPE \/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/ -->
        <div>
            <footer class="footer" style="color: floralwhite; text-align: center; text-shadow:#000 1px -1px, #000 -1px 1px, #000 1px 1px, #000 -1px -1px" >
                <!--FOOER AREA END-->
                <p>Desenvolvido pela turma de Sistemas para Internet<br/> Faculdade Anísio Teixeira - 2018.2</p>
            </footer>
        </div>

    </body>

</html>
